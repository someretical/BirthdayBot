generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Guild {
  id                  String  @id @db.VarChar(32)
  birthday_role_id    String? @db.VarChar(32)
  birthday_channel_id String? @db.VarChar(32)
}

model User {
  id                      String           @id @db.VarChar(32)
  birthday                DateTime
  PrivateMessageSenders   PrivateMessage[] @relation(name: "PrivateMessageSenders")
  PrivateMessageReceivers PrivateMessage[] @relation(name: "PrivateMessageReceivers")
  PublicMessageSenders    PublicMessage[]  @relation(name: "PublicMessageSenders")
  PublicMessageReceivers  PublicMessage[]  @relation(name: "PublicMessageReceivers")
}

model PrivateMessage {
  id BigInt @id @default(autoincrement())

  sender     User     @relation(name: "PrivateMessageSenders", fields: [senderId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  senderId   String   @db.VarChar(32)
  receiver   User     @relation(name: "PrivateMessageReceivers", fields: [receiverId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  receiverId String   @db.VarChar(32)
  year       DateTime
  message    String   @db.VarChar(1000)
}

model PublicMessage {
  id         BigInt   @id @default(autoincrement())
  sender     User     @relation(name: "PublicMessageSenders", fields: [senderId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  senderId   String   @db.VarChar(32)
  receiver   User     @relation(name: "PublicMessageReceivers", fields: [receiverId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  receiverId String   @db.VarChar(32)
  guildId    String   @db.VarChar(32)
  year       DateTime
  message    String   @db.VarChar(1000)
}
